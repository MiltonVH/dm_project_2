
# Reglas de asociación con apriori

## Limpiar entonrno
Limpiar por consola de todo el entorno (variables, datos, librerías).
```{r}
rm(list = ls())
```

## Librerías  y CLC
Carga de las librerías utilizadas para el proyecto.
```{r}
library(here)
library(dplyr)
library(ggplot2)

clc <- function() shell("cls")
```

## Carga de datos serializados 
```{r}
# Indicar año 2023, 2022 o 2019
year <- "2023"
path_file <- here("p1_data", paste("g", year, ".Rds", sep = ""))
graduados <- readRDS(path_file)
```


## Selección de variables de interes
```{r}
vars <- c("Logro_Mate",
          "Logro_Lect",
          "Ed_Asistio_Preprimaria",
          "Sc_Electricidad",
          "Desempeño_Mate",
          "Desempeño_Lect",
          "Cod_Depa",
          "Lect_Periodos_Lectura_Semana",
          "Mate_Periodos_Matematicas_Semana",
          "Jornada",
          "Ed_Trabaja_Actualmente",
          "Cod_Sector",
          "CC_Material_Predomina_En_Piso_Casa",
          "Computadora",
          "CC_Familia_Automovil",
          "Edad_RECO",
          "Sexo_RECO",
          "Cod_Area",
          "Sc_Servicio_Internet",
          "Fm_Grado_Alcanzo_Papa_RECO",
          "Fm_Grado_Alcanzo_Mama_RECO",
          "Grad_Trabajar",
          "Grad_Seguir_Estudiando",
          "Lectura_Gusto",
          "Identificacion_Etnica_RECO",
          "Lect_Libros_Completos_Ha_Leido",
          #"Informacion_Prueba",
          # "Measure_Mate",
          # "Measure_Lect",
          "Tipo_Eval",
          "Ed_Repitio_Algun_Grado")

if (year == 2022) {
  vars <- replace(vars, vars == "Cod_Sector", "sector")
  vars <- replace(vars, vars == "Edad_RECO", "Edad_Reco")
  vars <- replace(vars, vars == "Sexo_RECO", "Edad_Reco")
}
if (year == 2019) {
  vars <- setdiff(vars, "Cod_Sector")
  vars <- setdiff(vars, "Tipo_Eval")
  vars <- setdiff(vars, "Lectura_Gusto")
  vars <- setdiff(vars, "Grad_Trabajar")
  vars <- setdiff(vars, "Grad_Seguir_Estudiando")
  vars <- replace(vars, vars == "Edad_RECO", "Edad_Reco")
  vars <- replace(vars, vars == "Sexo_RECO", "Edad_Reco")
  vars <- replace(vars, vars == "Sc_Servicio_Internet",
                  "CC_Servicio_Internet")
  vars <- replace(vars, vars == "Ed_Repitio_Algun_Grado",
                  "Ed_Repitio_Algun_Grado_Primaria")
}
```


**Regla No. 1 y 2** con los datos del año 2023 sin segmentar y las variables indicadas en la sección de interés. 
**Regla No. 3** segmentado por estudiantes que aprobaron lectura en el sector Oficial.
**Regla No. 4** segmentado por estudiantes que aprobaron matematica en el sector Oficial.  
```{r}
df <- graduados %>% filter(Logro_Mate == "Logro" &
                             Cod_Sector == "Oficial")
df <- na.omit(df)
df <- graduados %>% select(all_of(vars))

df <- df %>% select(-Cod_Sector)
```

